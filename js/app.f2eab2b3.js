(function(e){function t(t){for(var a,o,c=t[0],i=t[1],d=t[2],l=0,f=[];l<c.length;l++)o=c[l],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&f.push(n[o][0]),n[o]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);u&&u(t);while(f.length)f.shift()();return s.push.apply(s,d||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],a=!0,c=1;c<r.length;c++){var i=r[c];0!==n[i]&&(a=!1)}a&&(s.splice(t--,1),e=o(o.s=r[0]))}return e}var a={},n={app:0},s=[];function o(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=a,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(r,a,function(t){return e[t]}.bind(null,a));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/orders-table/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],i=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var u=i;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";r("85ec")},"28b1":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d"),r("4de4"),r("d3b7");var a=r("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("Table")],1)},s=[],o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("header",{staticClass:"header pt-4 shadow-lg"},[r("div",{staticClass:"container mx-auto px-4"},[r("div",{staticClass:"flex flex-row justify-between"},[r("div",[r("span",[e._v("Cyrrency select: ")]),e._l(Object.keys(e.availableCurrencies),(function(t){return r("button",{key:t,staticClass:"currency-button ml-1 mr-1 w-16 py-1 rounded-md font-semibold text-white ring-2",class:{"bg-gray-0":t!==e.baseCurrency,"bg-gray-500":t===e.baseCurrency,"ring-gray-300":t!==e.baseCurrency,"ring-gray-500":t===e.baseCurrency,"text-gray-500":t!==e.baseCurrency},attrs:{title:"select the desired currency"},on:{click:function(r){return e.currencySelect(t)}}},[e._v(e._s(t))])}))],2),r("div",{staticClass:"search"},[e._v(" Search: "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.search,expression:"search",modifiers:{trim:!0}}],staticClass:"border-gray-600 border-2 rounded",attrs:{type:"text",id:"search"},domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),r("a",{staticClass:"text-blue-600 underline",attrs:{href:"#statistic-table",title:"Go to table statistic"}},[e._v("Statistic")])])])]),e._v(" "),r("main",{staticClass:"content container mx-auto px-4"},[r("table",{staticClass:"table-auto mb-8",attrs:{id:"orders-table"}},[r("thead",[r("tr",e._l(e.header,(function(t){return r("th",{key:t.title,staticClass:"px-4 py-2 text-emerald-600",class:{"bg-gray-400":t==e.activeTh,"text-white":t==e.activeTh},attrs:{tilte:"sort the table by the given column"},on:{click:function(r){return e.headerClick(t)}}},[r("span",{staticClass:"sort-value"},[e._v(e._s(t.title)),r("span",{directives:[{name:"show",rawName:"v-show",value:t==e.activeTh,expression:"th==activeTh"}],staticClass:"sort-marker"},[e._v("↓")])])])})),0)]),r("tbody",[e._l(e.searchedOrders,(function(t,a){return r("order",{key:t.id,class:{"bg-gray-300":a%2==0},attrs:{order:t,exchange:e.exchange,baseCurrency:e.baseCurrency}})})),e.searchedOrders.length?e._e():r("tr",[r("td",{staticClass:"border border-emerald-500 px-4 py-2 text-emerald-600 font-medium bg-red-100",attrs:{colspan:"7"}},[e._v("Nothing found")])])],2)]),r("stats",{attrs:{searchedOrders:e.searchedOrders.length,ordersTotal:e.ordersTotal,averageCheck:e.averageCheck,averageCheckFemale:e.averageCheckFemale,averageCheckMale:e.averageCheckMale,baseCurrency:e.baseCurrency,exchange:e.exchange}})],1),e.dataLoading?r("div",{staticClass:"cover"}):e._e(),e.dataLoading?r("Preloader"):e._e()],1)},c=[],i=r("1da1"),d=r("2909"),u=r("5530"),l=r("3835"),f=(r("96cf"),r("c1f9"),r("4fad"),r("d81d"),r("7db0"),r("4e82"),r("ac1f"),r("841c"),r("caad"),r("2532"),r("25f0"),r("b64b"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("tr",[r("td",{staticClass:"border border-emerald-500 px-4 py-2 text-emerald-600 font-medium"},[e._v(e._s(e.order.transaction_id))]),r("td",{staticClass:"border border-emerald-500 px-4 py-2 text-emerald-600 font-medium"},[e._v(e._s(e._f("gender")(e.order.gender))+" "),r("a",{staticClass:"text-blue-600 underline",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.showInfoModal(e.order)}}},[e._v(e._s(e.order.username)+" "+e._s(e.order.last_name))])]),r("td",{staticClass:"border border-emerald-500 px-4 py-2 text-emerald-600 font-medium"},[e._v(e._s(e._f("dateFilter")(new Date(1e3*+e.order.created_at),"date-time")))]),r("td",{staticClass:"border border-emerald-500 px-4 py-2 text-emerald-600 font-medium"},[e._v(e._s(e._f("currencyFilter")(e._f("toFixed")(e.order.total*e.exchange[e.baseCurrency]),e.baseCurrency)))]),r("td",{staticClass:"border border-emerald-500 px-4 py-2 text-emerald-600 font-medium"},[e._v(e._s(e._f("cardScreen")(e.order.card_number)))]),r("td",{staticClass:"border border-emerald-500 px-4 py-2 text-emerald-600 font-medium"},[e._v(e._s(e.order.card_type))]),r("td",{staticClass:"border border-emerald-500 px-4 py-2 text-emerald-600 font-medium"},[e._v(e._s(e.order.order_country)+" ("+e._s(e.order.order_ip)+")")])])}),m=[],h=(r("1276"),r("159b"),r("a15b"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"modal-content bg-gray-100",attrs:{name:"user"}},[r("div",{staticClass:"text-right",attrs:{slot:"top-right"},slot:"top-right"},[r("button",{on:{click:function(t){return e.$emit("close")}}},[e._v(" ❌ ")])]),r("div",{staticClass:"modal-avatar mb-2"},[r("img",{attrs:{src:e.order.avatar}})]),r("h2",{staticClass:"text-3xl font-semibold mb-3"},[e._v(e._s(e.order.username))]),r("p",[e._v("Birthday: "+e._s(e._f("dateFilter")(new Date(1e3*+e.order.birthday),"date")))]),r("p",[e._v("Company: "+e._s(e.order.company.company_title))]),r("p",[e._v("Industry: "+e._s(e.order.company.company_industry))]),r("p",[r("i",[e._v(e._s(e.order.company.company_sector))])])])}),p=[],b={name:"Modal",props:{order:{type:Object,default:{},require:!0}}},y=b,v=r("2877"),_=Object(v["a"])(y,h,p,!1,null,"458e9208",null),g=_.exports,x={name:"Order",props:{order:{type:Object,default:{},require:!0},baseCurrency:{type:String,default:"USD",require:!0},exchange:{type:Object,default:{},require:!0}},data:function(){return{}},components:{modal:g},filters:{cardScreen:function(e){var t=e.split("");return t.forEach((function(e,t,r){t>1&&t<r.length-4&&(r[t]="*")})),t.join("")},gender:function(e){return"Male"===e?"Mr.":"Ms."}},methods:{showInfoModal:function(e){this.$modal.show(g,{order:e},{height:"auto"})}}},C=x,O=Object(v["a"])(C,f,m,!1,null,"0f59a327",null),w=O.exports,j=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("table",{staticClass:"table-fixed",attrs:{id:"statistic-table"}},[e._m(0),r("tbody",[r("tr",{staticClass:"bg-gray-300"},[r("td",{staticClass:"border border-emerald-500 px-4 py-2 text-emerald-600 font-bold text-right w-1/2"},[e._v("Orders Count")]),r("td",{staticClass:"border border-emerald-500 px-4 py-2 text-emerald-600 font-medium text-left w-1/2"},[e._v(e._s(e.searchedOrders))])]),r("tr",[r("td",{staticClass:"border border-emerald-500 px-4 py-2 text-emerald-600 font-bold text-right w-1/2"},[e._v("Orders Total")]),r("td",{staticClass:"border border-emerald-500 px-4 py-2 text-emerald-600 font-medium text-left w-1/2"},[e._v(e._s(e._f("currencyFilter")(e._f("toFixed")(e.ordersTotal*e.exchange[e.baseCurrency]),e.baseCurrency)))])]),r("tr",{staticClass:"bg-gray-300"},[r("td",{staticClass:"border border-emerald-500 px-4 py-2 text-emerald-600 font-bold text-right w-1/2"},[e._v("Average Check")]),r("td",{staticClass:"border border-emerald-500 px-4 py-2 text-emerald-600 font-medium text-left w-1/2"},[e._v(e._s(e._f("currencyFilter")(e._f("toFixed")(e.averageCheck*e.exchange[e.baseCurrency]),e.baseCurrency)))])]),r("tr",[r("td",{staticClass:"border border-emerald-500 px-4 py-2 text-emerald-600 font-bold text-right w-1/2"},[e._v("Average Check (Female)")]),e.averageCheckFemale?r("td",{staticClass:"border border-emerald-500 px-4 py-2 text-emerald-600 font-medium text-left w-1/2"},[e._v(e._s(e._f("currencyFilter")(e._f("toFixed")(e.averageCheckFemale*e.exchange[e.baseCurrency]),e.baseCurrency)))]):r("td",{staticClass:"border border-emerald-500 px-4 py-2 text-emerald-600 font-medium text-left w-1/2"},[e._v("n/a")])]),r("tr",{staticClass:"bg-gray-300"},[r("td",{staticClass:"border border-emerald-500 px-4 py-2 text-emerald-600 font-bold text-right w-1/2"},[e._v("Average Check (Male)")]),e.averageCheckMale?r("td",{staticClass:"border border-emerald-500 px-4 py-2 text-emerald-600 font-medium text-left w-1/2"},[e._v(e._s(e._f("currencyFilter")(e._f("toFixed")(e.averageCheckMale*e.exchange[e.baseCurrency]),e.baseCurrency)))]):r("td",{staticClass:"border border-emerald-500 px-4 py-2 text-emerald-600 font-medium text-left"},[e._v("n/a")])])])])},k=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("thead",[r("tr",[r("th",{staticClass:"px-4 py-2 text-emerald-600 text-center",attrs:{colspan:"2"}},[e._v("Statistic")])]),r("tr",[r("th",{staticClass:"px-4 text-emerald-600 text-center",attrs:{colspan:"2"}},[r("a",{staticClass:"text-blue-600 underline font-normal",attrs:{href:"#orders-table",title:"Go to table statistic"}},[e._v("Go to table top")])])])])}],F=(r("a9e3"),{name:"Stats",props:{searchedOrders:{type:Number,default:0,required:!0},ordersTotal:{type:Number,default:0,required:!0},averageCheck:{type:Number,default:0,required:!0},averageCheckFemale:{type:Number,default:0,required:!0},averageCheckMale:{type:Number,default:0,required:!0},baseCurrency:{type:String,default:"USD",require:!0},exchange:{type:Object,default:{},require:!0}}}),S=F,P=Object(v["a"])(S,j,k,!1,null,"51d5ee63",null),T=P.exports,U=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"loader"},[e._v("Loading...")])},M=[],D=(r("e58d"),{}),N=Object(v["a"])(D,U,M,!1,null,null,null),R=N.exports,q=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://raw.githubusercontent.com/wgnet/wg_forge_frontend/master/data/users.json").then((function(e){return e.json()}));case 3:return t=e.sent,e.next=6,fetch("https://raw.githubusercontent.com/wgnet/wg_forge_frontend/master/data/orders.json").then((function(e){return e.json()}));case 6:return r=e.sent,e.next=9,fetch("https://raw.githubusercontent.com/wgnet/wg_forge_frontend/master/data/companies.json").then((function(e){return e.json()}));case 9:return a=e.sent,e.abrupt("return",{users:t,orders:r,companies:a});case 13:return e.prev=13,e.t0=e["catch"](0),e.abrupt("return",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://data.fixer.io/api/latest?access_key=49656929fa6f6834e9007f4334997cd3&symbols=USD,RUB,CNY");case 3:return t=e.sent,e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e["catch"](0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),$={name:"Table",data:function(){return{users:[],orders:[],companies:[],header:[{sortValue:"transaction_id",title:"Transaction ID",status:!1},{sortValue:"username",title:"User Info",status:!1},{sortValue:"created_at",title:"Order Date",status:!1},{sortValue:"total",title:"Order Amount",status:!1},{sortValue:null,title:"Card Number",status:!1},{sortValue:"card_type",title:"Card Type",status:!1},{sortValue:"order_country",title:"Location",status:!1}],activeTh:null,sortParameter:null,search:"",baseCurrency:"USD",exchange:{USD:1,EUR:null,RUB:null,CNY:null},dataLoading:!1}},components:{order:w,stats:T,Preloader:R},computed:{availableCurrencies:function(){return Object.fromEntries(Object.entries(this.exchange).filter((function(e){var t=Object(l["a"])(e,2),r=(t[0],t[1]);return null!==r})))},modifiedUsers:function(){var e=this;return this.users.map((function(t){if(null!==t.company_id){var r=e.companies.find((function(e){return e.id===t.company_id}));return Object(u["a"])(Object(u["a"])({},t),{},{title:r.title,industry:r.industry,sector:r.sector})}return Object(u["a"])(Object(u["a"])({},t),{},{title:"n/a",industry:"n/a",sector:"n/a"})}))},concatedOrders:function(){var e=this;return this.orders.map((function(t){var r=e.modifiedUsers.find((function(e){return e.id===t.user_id}));return Object(u["a"])(Object(u["a"])({},t),{},{username:r.first_name+" "+r.last_name,gender:r.gender,avatar:r.avatar,birthday:r.birthday,company:{company_title:r.title,company_industry:r.industry,company_sector:r.sector}})}))},sorteddOrders:function(){var e=this,t=Object(d["a"])(this.concatedOrders);return this.sortParameter?"total"!=this.sortParameter&&"order_country"!=this.sortParameter?t.sort((function(t,r){return t[e.sortParameter]>r[e.sortParameter]?1:t[e.sortParameter]<r[e.sortParameter]?-1:0})):"order_country"===this.sortParameter?t.sort((function(e,t){return e.order_country+" "+e.order_ip>t.order_country+" "+t.order_ip?1:e.order_country+" "+e.order_ip<t.order_country+" "+t.order_ip?-1:0})):t.sort((function(t,r){return t[e.sortParameter]-r[e.sortParameter]})):this.concatedOrders},searchedOrders:function(){var e=this;return this.search.length>1?this.sorteddOrders.filter((function(t){var r=Object.entries(t).filter((function(t,r){var a=Object(l["a"])(t,2),n=a[0],s=a[1];if("transaction_id"===n||"username"===n||"total"===n||"card_type"===n||"order_country"===n&&s)return s.toString().toLowerCase().includes(e.search.toLowerCase())}));return r.length>0})):this.sorteddOrders},ordersTotal:function(){return this.searchedOrders.reduce((function(e,t){return e+ +t.total}),0)},averageCheck:function(){var e=this.searchedOrders.reduce((function(e,t){return e+ +t.total}),0);return e/this.searchedOrders.length},averageCheckFemale:function(){var e=this.searchedOrders.filter((function(e){return"Female"===e.gender}));if(e.length>0){var t=e.reduce((function(e,t){return e+ +t.total}),0);return t/e.length}return 0},averageCheckMale:function(){var e=this.searchedOrders.filter((function(e){return"Male"===e.gender}));if(e.length>0){var t=e.reduce((function(e,t){return e+ +t.total}),0);return t/e.length}return 0}},methods:{headerClick:function(e){this.activeTh=e,this.sortParameter=e.sortValue},currencySelect:function(e){this.baseCurrency=e},exchangeInstall:function(e){this.exchange.EUR=1/e.USD,this.exchange.RUB=1/e.USD/(1/e.RUB),this.exchange.CNY=1/e.USD/(1/e.CNY)}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dataLoading=!0,t.next=3,q();case 3:return r=t.sent,Object.keys(r).length>0&&(e.users=r.users,e.orders=r.orders,e.companies=r.companies),t.next=7,E();case 7:a=t.sent,a.success&&e.exchangeInstall(a.rates),e.dataLoading=!1;case 10:case"end":return t.stop()}}),t)})))()}},I=$,L=(r("6e23"),Object(v["a"])(I,o,c,!1,null,"5672330e",null)),V=L.exports,A={name:"App",components:{Table:V}},B=A,Y=(r("034f"),Object(v["a"])(B,n,s,!1,null,null,null)),G=Y.exports,J=(r("5aea"),r("1881")),z=r.n(J);function H(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return Intl.NumberFormat("ru-RU",{style:"currency",currency:t}).format(e)}function K(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"date",r={};return t.includes("date")&&(r.day="2-digit",r.month="numeric",r.year="numeric"),t.includes("time")&&(r.hour="2-digit",r.minute="2-digit",r.second="2-digit"),new Intl.DateTimeFormat("ru-RU",r).format(new Date(e))}r("b680");function Q(e){return e.toFixed(2)}a["a"].use(z.a),a["a"].filter("currencyFilter",H),a["a"].filter("dateFilter",K),a["a"].filter("toFixed",Q),a["a"].config.productionTip=!1,new a["a"]({render:function(e){return e(G)}}).$mount("#app")},"5aea":function(e,t,r){},"6e23":function(e,t,r){"use strict";r("adef")},"85ec":function(e,t,r){},adef:function(e,t,r){},e58d:function(e,t,r){"use strict";r("28b1")}});
//# sourceMappingURL=app.f2eab2b3.js.map